Sitemap
=======

[![Build Status](https://img.shields.io/github/actions/workflow/status/pelican-plugins/sitemap/main.yml?branch=main)](https://github.com/pelican-plugins/sitemap/actions) [![PyPI Version](https://img.shields.io/pypi/v/pelican-sitemap)](https://pypi.org/project/pelican-sitemap/) ![License](https://img.shields.io/pypi/l/pelican-sitemap?color=blue)

Generate plain-text or XML sitemaps compliant with the [current standard](https://sitemaps.org/protocol.html).

Installation
------------

This plugin can be installed via:

    python -m pip install pelican-sitemap

Settings
--------

All settings are stored in a `SITEMAP` dict:

|   Settings    | What does it do? |
| ------------- | ---------------- |
|  `compress`   | Toggle gzip compression of sitemap files |
|   `format`    | Select sitemap file format |
|  `out_path`   | Set root directory for sitemap file(s), if different from the default location |
| `frequencies` | Default frequency values for articles/translations, static pages and index pages (for categories, tags, etc.) |
| `priorities`  | Default priorities values for articles, pages and index pages (for categories, tags, etc.) |
|   `include`   | URLs not generated by Pelican that should be included in the sitemap |
|   `exclude`   | URLs generated by Pelican that should be excluded from the sitemap |

These are the default settings:

```python
SITEMAP = {
	"compress": True,
	"format": "xml",
	"out_path": ".",
	"frequencies": {
		"articles": "monthly",
		"indexes": "daily",
		"pages": "monthly",
		},
	"priorities": {
		"articles": 0.5,
		"indexes": 0.5,
		"pages": 0.5
		},
	"include": [],
	"exclude": [],
	}
```
Incorrect user-provided settings will be replaced with the defaults shown here

Usage
-----

To create plain-text sitemaps, set `format` to `txt`; to create XML sitemaps set `format` to `xml`

If your Pelican output directory is `output/files/` but you want your sitemap to be created in `output/`, set `out_path` to `../`

Valid values inside the `frequencies` dict are the following: `always`, `hourly`, `daily`, `weekly`, `monthly`, `yearly` and `never`

Valid values inside the `priorities` dict are `float`s between 0 and 1, inclusive

You can set the frequency and priority values of individual pieces of content by setting `sitemap_freq` and `sitemap_pri` in the content's metadata

To include an URL in your sitemap not generated by Pelican, add an entry to the `include` list like so:

```python
"include": [{
	"url": "http://example.com/test-page.html",
	"lm": "%Y-%m-%dT%H:%M:%S",					# can also be an epoch timestamp or datetime object
	"freq": "weekly",
	"pri": 0.42
	}]
```

To exclude individual pieces of content from your sitemap, you can either set `private` to `True` or `status` to `hidden` in the content's metadata
To exclude multiple related URLs from your sitemap at the same time, add an entry in the `exclude` list; excluding all URLs that contain `should-exclude/` is done like so:

```python
exclude: ["should-exclude/"]
```

Contributing
------------

Contributions are welcome and much appreciated. Every little bit helps. You can contribute by improving the documentation, adding missing features, and fixing bugs. You can also help out by reviewing and commenting on [existing issues][].

To start contributing to this plugin, review the [Contributing to Pelican][] documentation, beginning with the **Contributing Code** section.

[Pelican]: https://github.com/getpelican/pelican
[existing issues]: https://github.com/pelican-plugins/sitemap/issues
[Contributing to Pelican]: https://docs.getpelican.com/en/latest/contribute.html

License
-------

This project is licensed under version 3.0 of the Non-Profit Open Source License.
